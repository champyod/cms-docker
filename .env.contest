# =============================================================================
# CMS Contest Web Server Environment Configuration
# Author: CCYod | Repository: https://github.com/champyod/cms-docker
# =============================================================================

# -----------------------------------------------------------------------------
# CMS Configuration
# -----------------------------------------------------------------------------
CMS_CONFIG=/usr/local/etc/cms.conf

# -----------------------------------------------------------------------------
# Contest Selection
# -----------------------------------------------------------------------------
# IMPORTANT: This selects which contest to serve
# Change this value for each contest you want to run
CONTEST_ID=1

# -----------------------------------------------------------------------------
# Access Method Configuration
# -----------------------------------------------------------------------------
# Choose your access method: "domain" or "public_port"
# - domain: Use domain names with reverse proxy (requires DNS setup)
# - public_port: Use public IP and ports directly (no DNS required)
ACCESS_METHOD=public_port

# Public IP Configuration (only needed if ACCESS_METHOD=public_port)
# Set this to your VPS public IP address
PUBLIC_IP=0.0.0.0
# Example: PUBLIC_IP=203.0.113.45

# -----------------------------------------------------------------------------
# Contest Web Server Configuration
# -----------------------------------------------------------------------------
CONTEST_WEB_SERVER_SHARD=0
CONTEST_LISTEN_ADDRESS=0.0.0.0
CONTEST_LISTEN_PORT=8888
CONTEST_PORT_EXTERNAL=8888

# Contest domain for Traefik/reverse proxy (only used if ACCESS_METHOD=domain)
CONTEST_DOMAIN=contest.cms.local

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Generate a new secret key for each contest using:
# python3 -c 'from cmscommon import crypto; print(crypto.get_hex_random_key())'
SECRET_KEY=8e045a51e4b102ea803c06f92841a1fb

# Session cookie duration in seconds (default: 3 hours)
COOKIE_DURATION=10800

# -----------------------------------------------------------------------------
# Submission Settings
# -----------------------------------------------------------------------------
# Maximum size of a submission in bytes
MAX_SUBMISSION_LENGTH=100000

# Maximum size of user test input in bytes
MAX_INPUT_LENGTH=5000000

# Save local copy of submissions
SUBMIT_LOCAL_COPY=true

# -----------------------------------------------------------------------------
# Proxy Configuration
# -----------------------------------------------------------------------------
# Number of reverse proxies in front of CMS (nginx, load balancer, etc.)
# Set to 1 if using nginx, 0 if direct access
NUM_PROXIES_USED=1

# -----------------------------------------------------------------------------
# TLS/HTTPS Configuration (for Traefik)
# -----------------------------------------------------------------------------
ENABLE_TLS=false
TLS_CERTRESOLVER=letsencrypt

# -----------------------------------------------------------------------------
# Resource Limits
# -----------------------------------------------------------------------------
CONTEST_WEB_CPU_LIMIT=2
CONTEST_WEB_MEMORY_LIMIT=2G
CONTEST_WEB_CPU_RESERVATION=0.5
CONTEST_WEB_MEMORY_RESERVATION=512M

# -----------------------------------------------------------------------------
# Nginx Configuration (if using nginx profile)
# -----------------------------------------------------------------------------
NGINX_EXTERNAL_PORT=80
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# -----------------------------------------------------------------------------
# Paths
# -----------------------------------------------------------------------------
CMS_LOG_DIR=/var/local/log/cms
CMS_CACHE_DIR=/var/local/cache/cms
CMS_DATA_DIR=/var/local/lib/cms
